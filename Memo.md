Memo
==========================================

# アプリケーションスタック
必要な実装

- Webページを提供したい。よってHTTPサーバが必要
- 我々のサーバでは、リクエストが要求しているURLによってそれぞれ別に応答する必要がある。
  よってリクエストをリクエストハンドラに結びつけるためのルータのようなものが必要
- サーバに届き、ルータによって渡されたリクエストの内容に応えるために、 リクエストハンドラが必要
- ルータはどんなPOSTデータでも取り扱えるべきで、 そのデータをリクエストハンドラに使い易い形式で渡す必要がある。
  よってリクエストデータハンドリングが必要
- URLへのリクエストだけを扱いたいのではなく、 それらのURLが要求された時に内容を表示したい。
  つまり、コンテンツをユーザのブラウザへ送り返すための、 リクエストハンドラから利用できるビューロジックが必要
- ユーザは画像をアップロードできるようになるため、何らかの形で、 細かい部分の面倒を見るアップロードハンドリングが必要

# リクエストハンドラ

- リクエストハンドラはメインファイルからサーバに渡し、そこからさらにルータに渡す
- 要素の数が変わって、文字列(おそらくリクエストURL)にマッピングする => 連想配列(JSではオブジェクト)を使う

# Non blocking I/O

- child_process module の exec 関数はノンブロッキングで実行され、完了時にコールバックできる
- コールバック時にコンテンツを表示するため、response オブジェクトを渡してやる必要がある

# POST request

- POST request は巨大な可能性があるのでノンブロッキングにする
- data(POSTデータの中の新しい塊が届いた時)とend(すべての塊を受信した時)はPOSTデータを細かい塊で扱える
- リクエストから全てのデータをアプリケーションに渡すのはHTTPサーバの仕事。
  POSTデータの処理はサーバ内で行い、 最終的なデータをルータやリクエストハンドラに渡す。
  ルータやリクエストハンドラがそれをどう扱うかを決める。

# File upload

- node-formidable module => HTTP POST で送られたフォームデータをパースできるようになる
- fs module => File system
